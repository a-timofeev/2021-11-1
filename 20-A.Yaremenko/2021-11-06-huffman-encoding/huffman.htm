<!DOCTYPE html>
<html>

<head>
<meta charset="UTF-8">
<title>Huffman codes</title>
<style>
  html, body {
    height: 100%;
    background: linear-gradient(135deg, #FFFFFF, #696969);
  }
  label {
    font: italic bold 32px monospace;
  }
  button {
    display:block;
    background: linear-gradient(225deg, #FFFFFF, #696969);
    font: italic bold 32px monospace;
    border-radius: 20px;
  }
  textarea {
    width: 100%;
    display:block;
    max-width: 100%;
    border: 2px solid #000000;
    border-radius: 10px;
    font: italic bold 16px cursive;
    box-shadow: 2px 2px 2px 2px rgba(0,0,0,0.5);
    background: #FFFFFF;
  }
</style>
<script>
function build_nodes(a) {
  let nodes = [], current = [];
  for (let e in a) {
    nodes.push({"str": e, "val": a[e], "left": null, "right": null});
    current.push({"str": e, "val": a[e], "left": null, "right": null});
  }
  while (current.length > 1) {
    current.sort(function(x, y) { return y["val"] - x["val"]; });
    let x = current.pop(), y = current.pop();
    current.push({"str": x["str"] + y["str"], "val": x["val"] + y["val"], "left": x, "right": y});
    nodes.push({"str": x["str"] + y["str"], "val": x["val"] + y["val"], "left": x, "right": y});
  }
  
  return nodes;
}

function build_codes(nodes) {
  let codes = {};
  for (let e of nodes) {
    if (e["str"].length == 1)
    codes[e["str"]] = "";
  }
  let i = nodes.length;
  while(i--) {
    let l = nodes[i]["left"], r = nodes[i]["right"];
    if (l != null) {
      let i = l["str"].length;
      while (i--) {
        codes[l["str"].charAt(i)] += "0";
      }
    }
    if (r != null) {
      let i = r["str"].length;
      while (i--) {
        codes[r["str"].charAt(i)] += "1";
      }
    }
  }
  return codes;
}

function get_codes() {
  let a = JSON.parse(document.getElementById("freq").value);
  codes = build_codes(build_nodes(a));
  document.getElementById("code").value = "";
  for (let e in codes) {
    document.getElementById("code").value += e + ": " + codes[e] + "\n";
  }
}

function code() {
  let s = document.getElementById("str").value, a = {};
  let i = s.length;
  while(i--) {
    if (a[s.charAt(i)] == null) {
      a[s.charAt(i)] = 1;
    } else {
      a[s.charAt(i)] += 1;
    }
  }
  let codes = build_codes(build_nodes(a));
  document.getElementById("freq").value = "{";
  let b = Object.keys(a);
  for (let e of b) {
    document.getElementById("freq").value += "\"" + e + "\": " + a[e];
    if (e != b[b.length - 1]) {
      document.getElementById("freq").value += ", ";
    }
  }
  document.getElementById("freq").value += "}";
  document.getElementById("code").value = "";
  for (let e in codes) {
    document.getElementById("code").value += e + ": " + codes[e] + "\n";
  }
  document.getElementById("cstr").value = "";
  for (let i = 0; i < s.length; i++) {
    document.getElementById("cstr").value += codes[s.charAt(i)];
  }
  document.getElementById("coef").value = 0.125 * document.getElementById("cstr").value.length / document.getElementById("str").value.length;
}

function decode() {
  let a = JSON.parse(document.getElementById("freq").value), nodes = build_nodes(a);
  let cstr = document.getElementById("cstr").value;
  let current = nodes[nodes.length - 1];
  document.getElementById("str").value = ""
  for (let i = 0; i < cstr.length; i++) {
    if (cstr.charAt(i) == 0) {
      current = current["left"];
    } else {
      current = current["right"];
    }
    if (current["left"] == null) {
      document.getElementById("str").value += current["str"];
      current = nodes[nodes.length - 1];
    }
  }
  document.getElementById("coef").value = 0.125 * document.getElementById("cstr").value.length / document.getElementById("str").value.length;
}
</script>
</head>

<body>
<label>STRING</label><br>
<textarea id="str" rows = 1>This paragraph was a waste of time and space. If you had not read this and I had not typed this you and I could’ve done something more productive than reading this mindlessly and carelessly as if you did not have anything else to do in life. Life is so precious because it is short and you are being so careless that you do not realize it until now since this void paragraph mentions that you are doing something so mindless, so stupid, so careless that you realize that you are not using your time wisely. You could’ve been playing with your dog, or eating your cat, but no. You want to read this barren paragraph and expect something marvelous and terrific at the end. But since you still do not realize that you are wasting precious time, you still continue to read the null paragraph. If you had not noticed, you have wasted an estimated time of 20 seconds. Imagine what you could’ve done with those 20 seconds besides reading this non-productive paragraph. Imagine the things you could’ve accomplished. Imagine the possibilities. But time is irreversible and you still do not realize this. Somehow you have managed still to waste around now 35 seconds reading this stupid, excessive, and long paragraph with your irreversible time. If you haven’t realized that, then you have not yet read the whole paragraph. Even if you did, you still refuse to stop reading this essay. After around 45 seconds, you are still reading this mindlessly and carelessly with your precious and non-reversible time. If you remembered from the first sentence of this disgustingly long paragraph, you would remember that this paragraph was a waste of time and space, imagine if I had not typed this paragraph and you had not read it. Imagine all the things you could’ve done, the things that made you, you. But no, you are still reading this paragraph and it has been around 60 seconds, which is a whole full minute. A minute! Yet you still have the urge and motivation to read this pointless and long essay. Now you have nearly reached the end, you ponder, why am I reading this? Why is the writer making a paragraph so long that I have the urge and motivation to finish this pointless paragraph to prove him that reading is what makes me, me. Then you realize, you have wasted now around a minute and 10 seconds. If you had not make the idiotic decision of continuing to read this paragraph, use that mind of yours to think what you could’ve done throughout your whole irreversible time. You could’ve finished your homework, play with your cat, eat your seal, or you could’ve discovered who made the fire hydrant, if you did not get the reference, you could’ve went and learned something and post it on reddit in the subreddit “Today I learned”, but you still have the urge to read this insanely long paragraph, pondering how I typed this without rest. Then you read this text and see that text over there. Why am I still reading this? How does this paragraph know what I’m thinking? What did I eat last April the 17th? Then you come to the conclusion that you know that this useless and insanely long paragraph would tell you. And you are right, but I did not write this and you have wasted now around 2 minutes. A full 2 minutes. Now, use that intelligence that you have, assuming that your IQ is above 60 and you are literate. Now that you have made it this far, you wonder if you learned anything, but no, you did not get the reference about the fire hydrant and refused to look it up, then you make the decision of reading this long essay with your irreversible time. Since you have made it this far on your long journey, you try have the urge to stop reading. But I bet you cannot finish this paragraph for which you are lazy and want to continue on with your life, but you keep on reading this long, wasteful, barren, and non-productive essay that will not benefit you in any way than making you lose your irreversible and precious time, but that is not even a benefit. Soon you realize that it has been now 3 minutes. A full 3 minutes, now you use your intelligence with an IQ above 70 and ponder about the things you could’ve done, the assignments you could’ve done, the dogs and cats you could’ve eaten. But you continue reading this now nearly 2 paged paragraph. Then you wonder how this is even a paragraph. How am did I make it this far? Do I get a certificate? Why am I reading this pointless and barren paragraph? How does this essay know what I’m thinking about? Then finally, you feel relaxed and accomplished because the essay said finally to make you hyped up that you accomplished reading a nearly 2 paged essay then the paragraph creates a plot twist; You’re no where near the ending. Your insides wince a little while you’re reading this endless paragraph. Wondering if this will ever end. Then you start getting nervous that it’s almost time for bed, then you wonder what you ate for breakfast on June the 9th. How does this paragraph know what you’re thinking about you think? Because when you’re reading a paragraph inside your head, the words are projected into your brain with the IQ above 90 and then the thought process go through your internal organs and through yours eyes and you wonder if this is actually true but it’s really not because all it is non-sense. Then you look at your watch, if you had one, and realize that it’s been a near 4 minutes. 4 minutes, if you expect this paragraph to say the old and customary saying after you’ve discovered how long it’s been, then you’re wrong. This time, the paragraph is going to criticize you why you’re still reading this essay with your irreversible and precious time. Why are you still reading this you ask? Because you are so headstrong and careless, yet you have the urge and motivation to continue reading this essay that it feels like an eternity. If you have made it this far, then it is mind boggling on what you could’ve done with your near 5 minutes. Imagine the things you could’ve eaten ; sushi, sharks, dogs, snakes, cats, fish, humans, dogs, dogs, and many more wonders of this world. Then when you are reading this, you realize that there is no long a wall of text, you realize that you think you’ve made it to the ending and I congratulate you on your epic journey across the wall of text. Yet you have not yet realized, that you wasted a full 5 minutes on this paragraph that feels endless yet it has been ceased.</textarea><br>
<button type="button" onclick="code()">CODE</button><br>
<label>FREQUENCIES</label><br>
<textarea id="freq" rows = 1></textarea><br>
<button type="button" onclick="get_codes()">GET_CODES</button><br>
<label>CODES</label><br>
<textarea id="code" rows = 10></textarea><br>
<label>CODED_STRING</label><br>
<textarea id="cstr" rows = 1></textarea><br>
<button type="button" onclick="decode()">DECODE</button><br>
<label>COEFFICIENT</label><br>
<textarea id="coef" rows = 1></textarea><br>
</body>

</html>
